<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recibo Parqueadero</title>

<style>
body {
  font-family: Arial, sans-serif;
  font-size: 14px;
  font-weight: bold;
  color: #000;
  margin: 0;
  padding: 0;
  text-align: center;
}

@media print {
  body {
    width: 58mm;
    margin: 0;
  }
}

.recibo {
  width: 58mm;
  padding: 5px;
  margin: 0 auto;
  box-sizing: border-box;
}

.titulo {
  margin-bottom: 4px;
}

.item {
  margin-bottom: 5px;
}

.linea {
  border-top: 1px dashed #000;
  margin: 8px 0;
}

.imagen-container {
  margin-top: 10px;
  margin-bottom: 10px;
}

.imagen-container img {
  max-width: 100%;
  height: auto;
  display: none;
}

.pie {
  font-size: 13px;
  margin-top: 10px;
}

.pie strong {
  display: block;
  margin-bottom: 5px;
}
</style>
</head>

<body onload="cargarDatosYImprimir()">

<div class="recibo">

  <!-- ENCABEZADO DINÃMICO -->
  <div class="titulo" id="nombreSucursal" style="font-size:20px;"></div>
  <div class="titulo" id="direccionSucursal"></div>
  <div class="titulo" id="telefonoSucursal"></div>

  <div class="titulo">
    ðŸ•‘ Horario de atenciÃ³n<br>
    Lun a SÃ¡b: 7:00 am â€“ 7:00 pm<br>
    Domingos: 8:00 am â€“ 2:00 pm
  </div>

  <div class="linea"></div>

  <!-- DATOS DEL RECIBO -->
  <div class="item">Recibo: <span id="norecibo"></span></div>
  <div class="item">Placa: <span id="placa"></span></div>
  <div class="item">Ingreso: <span id="ingreso"></span></div>
  <div class="item">Salida: <span id="salida"></span></div>
  <div class="item">Precio: <span id="precio"></span></div>

  <div class="linea"></div>

  <div class="item"><strong>Total: <span id="total"></span></strong></div>

  <!-- IMAGEN OPCIONAL -->
  <div class="imagen-container">
    <img id="imagenRecibo" src="">
  </div>

  <div class="linea"></div>

  <div class="pie">
    <strong>AVISO IMPORTANTE</strong>
    <div>1. No respondemos por objetos dejados en la moto.</div>
    <div>2. Solo respondemos por pÃ©rdida de cascos entregados en custodia.</div>
    <div>3. Para retirar tu moto presenta este tiquet.</div>
  </div>

</div>

<script>
function cargarDatosYImprimir() {

  const params = new URLSearchParams(window.location.search);

  function setText(id, value) {
    const el = document.getElementById(id);
    if (el) el.textContent = value || "";
  }

  // ENCABEZADO
  const sucursal = decodeURIComponent(params.get("sucursalp") || "");
  const direccion = decodeURIComponent(params.get("dirsucur") || "");
  const telefono = decodeURIComponent(params.get("phone") || "");

  setText("nombreSucursal", sucursal ? "PARQUEADERO " + sucursal : "PARQUEADERO");
  setText("direccionSucursal", direccion ? "DIR: " + direccion : "");
  setText("telefonoSucursal", telefono ? "TEL: " + telefono : "");

  // DATOS
  setText("norecibo", params.get("norecibo"));
  setText("placa", params.get("placa"));
  setText("ingreso", params.get("ingreso"));
  setText("salida", params.get("salida"));
  setText("precio", params.get("precio_parqueo"));
  setText("total", params.get("total"));

  // IMAGEN
  const imagenRuta = params.get("imagen") || "";
  const img = document.getElementById("imagenRecibo");

  if (imagenRuta) {
    img.src = imagenRuta;
    img.style.display = "block";
  } else {
    img.style.display = "none";
  }

  // IMPRIMIR
  setTimeout(() => window.print(), 300);
}
</script>

</body>
</html>
